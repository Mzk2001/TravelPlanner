<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字段提取功能测试结果</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-result {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-input {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .field-item {
            margin: 8px 0;
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            border-left: 4px solid #1890ff;
        }
        .field-label {
            font-weight: bold;
            color: #333;
        }
        .field-value {
            color: #666;
            margin-left: 10px;
        }
        .success {
            border-left-color: #52c41a;
        }
        .warning {
            border-left-color: #faad14;
        }
        .error {
            border-left-color: #ff4d4f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧳 字段提取功能测试结果</h1>
        
        <div id="testResults"></div>
    </div>

    <script>
        // 测试用例
        const testCases = [
            "我想去日本，5天，预算1万元，喜欢美食和动漫，带1个孩子",
            "计划去北京旅游，3天时间，预算5000元，2个人",
            "上海迪士尼乐园，家庭游，4个人，预算8000元",
            "独自一人去杭州，预算3000元，休闲游",
            "情侣蜜月旅行，马尔代夫，预算2万元，7天",
            "商务出差到上海，预算1.5万元，1个人",
            "全家去泰国，预算8000元，3个人，喜欢美食",
            "去东京看樱花，预算5000元，2个人",
            "带孩子去迪士尼，预算3000元，3个人",
            "一个人去西藏，预算6000元，探险游"
        ];

        function extractFields(userMessage) {
            const fields = {
                destination: null,
                budget: null,
                groupSize: null,
                travelType: null
            };

            // 提取目的地
            const destinations = [
                "北京", "上海", "广州", "深圳", "杭州", "南京", "苏州", "成都", "重庆", "西安", "武汉", "长沙", "青岛", "大连", "厦门", "福州", "昆明", "贵阳", "南宁", "海口", "三亚", "拉萨", "乌鲁木齐", "银川", "西宁", "兰州", "呼和浩特", "哈尔滨", "长春", "沈阳", "石家庄", "太原", "济南", "合肥", "南昌", "郑州",
                "日本", "东京", "大阪", "京都", "北海道", "冲绳", "韩国", "首尔", "釜山", "济州岛", "新加坡", "马来西亚", "吉隆坡", "泰国", "曼谷", "普吉岛", "清迈", "越南", "河内", "胡志明市", "柬埔寨", "吴哥窟", "缅甸", "仰光", "老挝", "万象", "菲律宾", "马尼拉", "长滩岛", "印度尼西亚", "巴厘岛", "雅加达", "印度", "新德里", "孟买", "尼泊尔", "加德满都", "斯里兰卡", "科伦坡", "马尔代夫", "马累",
                "美国", "纽约", "洛杉矶", "旧金山", "拉斯维加斯", "夏威夷", "加拿大", "温哥华", "多伦多", "墨西哥", "墨西哥城", "巴西", "里约热内卢", "圣保罗", "阿根廷", "布宜诺斯艾利斯", "智利", "圣地亚哥", "秘鲁", "利马", "哥伦比亚", "波哥大",
                "英国", "伦敦", "爱丁堡", "法国", "巴黎", "里昂", "德国", "柏林", "慕尼黑", "意大利", "罗马", "米兰", "威尼斯", "西班牙", "马德里", "巴塞罗那", "葡萄牙", "里斯本", "荷兰", "阿姆斯特丹", "比利时", "布鲁塞尔", "瑞士", "苏黎世", "日内瓦", "奥地利", "维也纳", "捷克", "布拉格", "匈牙利", "布达佩斯", "波兰", "华沙", "俄罗斯", "莫斯科", "圣彼得堡", "希腊", "雅典", "土耳其", "伊斯坦布尔", "挪威", "奥斯陆", "瑞典", "斯德哥尔摩", "丹麦", "哥本哈根", "芬兰", "赫尔辛基", "冰岛", "雷克雅未克",
                "澳大利亚", "悉尼", "墨尔本", "珀斯", "新西兰", "奥克兰", "惠灵顿", "斐济", "苏瓦", "西藏", "迪士尼"
            ];
            
            for (const dest of destinations) {
                if (userMessage.includes(dest)) {
                    fields.destination = dest;
                    break;
                }
            }

            // 提取预算
            const budgetPatterns = [
                /(?:预算|花费|费用|价格|价钱|成本)(?:是|为|约|大概|左右)?(?:\\s*)([0-9]+(?:\\.[0-9]+)?)(?:万|千|元|块)?/,
                /([0-9]+(?:\\.[0-9]+)?)(?:万|千|元|块)(?:的)?(?:预算|花费|费用)/,
                /(?:准备|计划|打算)(?:花|用|花费)([0-9]+(?:\\.[0-9]+)?)(?:万|千|元|块)/,
                /([0-9]+(?:\\.[0-9]+)?)(?:万|千|元|块)(?:以内|以下|左右|上下)/
            ];
            
            for (const pattern of budgetPatterns) {
                const match = userMessage.match(pattern);
                if (match) {
                    let amount = parseFloat(match[1]);
                    if (userMessage.includes('万')) {
                        amount *= 10000;
                    } else if (userMessage.includes('千')) {
                        amount *= 1000;
                    }
                    fields.budget = amount;
                    break;
                }
            }

            // 提取人数
            const groupPatterns = [
                /(?:带|和|与|跟)([0-9]+)(?:个|名|位|人)(?:孩子|朋友|家人|同伴|伙伴)/,
                /([0-9]+)(?:个人|人|名|位)(?:一起|一同|共同)/,
                /(?:一共|总共|合计)([0-9]+)(?:个人|人|名|位)/,
                /(?:我们|咱们)([0-9]+)(?:个人|人|名|位)/,
                /(?:家庭|团队|小组)(?:有|是)([0-9]+)(?:个人|人|名|位)/,
                /([0-9]+)(?:人|个人|名|位)(?:的)?(?:旅行|旅游|出行)/
            ];
            
            for (const pattern of groupPatterns) {
                const match = userMessage.match(pattern);
                if (match) {
                    fields.groupSize = parseInt(match[1]);
                    break;
                }
            }
            
            // 特殊关键词匹配
            if (userMessage.includes('一个人') || userMessage.includes('独自') || userMessage.includes('单独')) {
                fields.groupSize = 1;
            }
            if (userMessage.includes('两个人') || userMessage.includes('情侣') || userMessage.includes('夫妻')) {
                fields.groupSize = 2;
            }
            if (userMessage.includes('一家人') || userMessage.includes('全家')) {
                fields.groupSize = 3;
            }

            // 提取旅行类型
            const message = userMessage.toLowerCase();
            if (message.includes('商务') || message.includes('出差') || message.includes('会议')) {
                fields.travelType = '商务';
            } else if (message.includes('蜜月') || message.includes('情侣') || message.includes('浪漫')) {
                fields.travelType = '蜜月';
            } else if (message.includes('家庭') || message.includes('亲子') || message.includes('带孩子')) {
                fields.travelType = '家庭';
            } else if (message.includes('探险') || message.includes('户外') || message.includes('徒步') || message.includes('登山')) {
                fields.travelType = '探险';
            } else if (message.includes('美食') || message.includes('吃货') || message.includes('品尝')) {
                fields.travelType = '美食';
            } else if (message.includes('文化') || message.includes('历史') || message.includes('古迹') || message.includes('博物馆')) {
                fields.travelType = '文化';
            } else if (message.includes('购物') || message.includes('血拼') || message.includes('买买买')) {
                fields.travelType = '购物';
            } else if (message.includes('休闲') || message.includes('度假') || message.includes('放松')) {
                fields.travelType = '休闲';
            } else if (message.includes('摄影') || message.includes('拍照') || message.includes('打卡')) {
                fields.travelType = '摄影';
            } else {
                fields.travelType = '休闲';
            }

            return fields;
        }

        function runTests() {
            const resultsDiv = document.getElementById('testResults');
            let html = '';
            
            testCases.forEach((testCase, index) => {
                const fields = extractFields(testCase);
                const extractedCount = [fields.destination, fields.budget, fields.groupSize, fields.travelType].filter(f => f !== null).length;
                
                let resultClass = 'success';
                if (extractedCount === 0) {
                    resultClass = 'error';
                } else if (extractedCount < 3) {
                    resultClass = 'warning';
                }
                
                html += `
                    <div class="test-result">
                        <div class="test-input">测试用例 ${index + 1}: ${testCase}</div>
                        <div class="field-item ${fields.destination ? 'success' : 'error'}">
                            <span class="field-label">目的地:</span>
                            <span class="field-value">${fields.destination || '未提取到'}</span>
                        </div>
                        <div class="field-item ${fields.budget ? 'success' : 'error'}">
                            <span class="field-label">预算:</span>
                            <span class="field-value">${fields.budget ? fields.budget + '元' : '未提取到'}</span>
                        </div>
                        <div class="field-item ${fields.groupSize ? 'success' : 'error'}">
                            <span class="field-label">人数:</span>
                            <span class="field-value">${fields.groupSize ? fields.groupSize + '人' : '未提取到'}</span>
                        </div>
                        <div class="field-item ${fields.travelType ? 'success' : 'error'}">
                            <span class="field-label">旅行类型:</span>
                            <span class="field-value">${fields.travelType || '未提取到'}</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 14px; color: #666;">
                            提取成功率: ${extractedCount}/4 (${Math.round(extractedCount/4*100)}%)
                        </div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        // 页面加载完成后运行测试
        window.onload = runTests;
    </script>
</body>
</html>
