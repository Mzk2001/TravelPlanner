<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­—æ®µæå–åŠŸèƒ½æµ‹è¯•ç»“æœ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-result {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-input {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .field-item {
            margin: 8px 0;
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            border-left: 4px solid #1890ff;
        }
        .field-label {
            font-weight: bold;
            color: #333;
        }
        .field-value {
            color: #666;
            margin-left: 10px;
        }
        .success {
            border-left-color: #52c41a;
        }
        .warning {
            border-left-color: #faad14;
        }
        .error {
            border-left-color: #ff4d4f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§³ å­—æ®µæå–åŠŸèƒ½æµ‹è¯•ç»“æœ</h1>
        
        <div id="testResults"></div>
    </div>

    <script>
        // æµ‹è¯•ç”¨ä¾‹
        const testCases = [
            "æˆ‘æƒ³å»æ—¥æœ¬ï¼Œ5å¤©ï¼Œé¢„ç®—1ä¸‡å…ƒï¼Œå–œæ¬¢ç¾é£Ÿå’ŒåŠ¨æ¼«ï¼Œå¸¦1ä¸ªå­©å­",
            "è®¡åˆ’å»åŒ—äº¬æ—…æ¸¸ï¼Œ3å¤©æ—¶é—´ï¼Œé¢„ç®—5000å…ƒï¼Œ2ä¸ªäºº",
            "ä¸Šæµ·è¿ªå£«å°¼ä¹å›­ï¼Œå®¶åº­æ¸¸ï¼Œ4ä¸ªäººï¼Œé¢„ç®—8000å…ƒ",
            "ç‹¬è‡ªä¸€äººå»æ­å·ï¼Œé¢„ç®—3000å…ƒï¼Œä¼‘é—²æ¸¸",
            "æƒ…ä¾£èœœæœˆæ—…è¡Œï¼Œé©¬å°”ä»£å¤«ï¼Œé¢„ç®—2ä¸‡å…ƒï¼Œ7å¤©",
            "å•†åŠ¡å‡ºå·®åˆ°ä¸Šæµ·ï¼Œé¢„ç®—1.5ä¸‡å…ƒï¼Œ1ä¸ªäºº",
            "å…¨å®¶å»æ³°å›½ï¼Œé¢„ç®—8000å…ƒï¼Œ3ä¸ªäººï¼Œå–œæ¬¢ç¾é£Ÿ",
            "å»ä¸œäº¬çœ‹æ¨±èŠ±ï¼Œé¢„ç®—5000å…ƒï¼Œ2ä¸ªäºº",
            "å¸¦å­©å­å»è¿ªå£«å°¼ï¼Œé¢„ç®—3000å…ƒï¼Œ3ä¸ªäºº",
            "ä¸€ä¸ªäººå»è¥¿è—ï¼Œé¢„ç®—6000å…ƒï¼Œæ¢é™©æ¸¸"
        ];

        function extractFields(userMessage) {
            const fields = {
                destination: null,
                budget: null,
                groupSize: null,
                travelType: null
            };

            // æå–ç›®çš„åœ°
            const destinations = [
                "åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·", "æ·±åœ³", "æ­å·", "å—äº¬", "è‹å·", "æˆéƒ½", "é‡åº†", "è¥¿å®‰", "æ­¦æ±‰", "é•¿æ²™", "é’å²›", "å¤§è¿", "å¦é—¨", "ç¦å·", "æ˜†æ˜", "è´µé˜³", "å—å®", "æµ·å£", "ä¸‰äºš", "æ‹‰è¨", "ä¹Œé²æœ¨é½", "é“¶å·", "è¥¿å®", "å…°å·", "å‘¼å’Œæµ©ç‰¹", "å“ˆå°”æ»¨", "é•¿æ˜¥", "æ²ˆé˜³", "çŸ³å®¶åº„", "å¤ªåŸ", "æµå—", "åˆè‚¥", "å—æ˜Œ", "éƒ‘å·",
                "æ—¥æœ¬", "ä¸œäº¬", "å¤§é˜ª", "äº¬éƒ½", "åŒ—æµ·é“", "å†²ç»³", "éŸ©å›½", "é¦–å°”", "é‡œå±±", "æµå·å²›", "æ–°åŠ å¡", "é©¬æ¥è¥¿äºš", "å‰éš†å¡", "æ³°å›½", "æ›¼è°·", "æ™®å‰å²›", "æ¸…è¿ˆ", "è¶Šå—", "æ²³å†…", "èƒ¡å¿—æ˜å¸‚", "æŸ¬åŸ”å¯¨", "å´å“¥çªŸ", "ç¼…ç”¸", "ä»°å…‰", "è€æŒ", "ä¸‡è±¡", "è²å¾‹å®¾", "é©¬å°¼æ‹‰", "é•¿æ»©å²›", "å°åº¦å°¼è¥¿äºš", "å·´å˜å²›", "é›…åŠ è¾¾", "å°åº¦", "æ–°å¾·é‡Œ", "å­Ÿä¹°", "å°¼æ³Šå°”", "åŠ å¾·æ»¡éƒ½", "æ–¯é‡Œå…°å¡", "ç§‘ä¼¦å¡", "é©¬å°”ä»£å¤«", "é©¬ç´¯",
                "ç¾å›½", "çº½çº¦", "æ´›æ‰çŸ¶", "æ—§é‡‘å±±", "æ‹‰æ–¯ç»´åŠ æ–¯", "å¤å¨å¤·", "åŠ æ‹¿å¤§", "æ¸©å“¥å", "å¤šä¼¦å¤š", "å¢¨è¥¿å“¥", "å¢¨è¥¿å“¥åŸ", "å·´è¥¿", "é‡Œçº¦çƒ­å†…å¢", "åœ£ä¿ç½—", "é˜¿æ ¹å»·", "å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯", "æ™ºåˆ©", "åœ£åœ°äºšå“¥", "ç§˜é²", "åˆ©é©¬", "å“¥ä¼¦æ¯”äºš", "æ³¢å“¥å¤§",
                "è‹±å›½", "ä¼¦æ•¦", "çˆ±ä¸å ¡", "æ³•å›½", "å·´é»", "é‡Œæ˜‚", "å¾·å›½", "æŸæ—", "æ…•å°¼é»‘", "æ„å¤§åˆ©", "ç½—é©¬", "ç±³å…°", "å¨å°¼æ–¯", "è¥¿ç­ç‰™", "é©¬å¾·é‡Œ", "å·´å¡ç½—é‚£", "è‘¡è„ç‰™", "é‡Œæ–¯æœ¬", "è·å…°", "é˜¿å§†æ–¯ç‰¹ä¸¹", "æ¯”åˆ©æ—¶", "å¸ƒé²å¡å°”", "ç‘å£«", "è‹é»ä¸–", "æ—¥å†…ç“¦", "å¥¥åœ°åˆ©", "ç»´ä¹Ÿçº³", "æ·å…‹", "å¸ƒæ‹‰æ ¼", "åŒˆç‰™åˆ©", "å¸ƒè¾¾ä½©æ–¯", "æ³¢å…°", "åæ²™", "ä¿„ç½—æ–¯", "è«æ–¯ç§‘", "åœ£å½¼å¾—å ¡", "å¸Œè…Š", "é›…å…¸", "åœŸè€³å…¶", "ä¼Šæ–¯å¦å¸ƒå°”", "æŒªå¨", "å¥¥æ–¯é™†", "ç‘å…¸", "æ–¯å¾·å“¥å°”æ‘©", "ä¸¹éº¦", "å“¥æœ¬å“ˆæ ¹", "èŠ¬å…°", "èµ«å°”è¾›åŸº", "å†°å²›", "é›·å…‹é›…æœªå…‹",
                "æ¾³å¤§åˆ©äºš", "æ‚‰å°¼", "å¢¨å°”æœ¬", "ç€æ–¯", "æ–°è¥¿å…°", "å¥¥å…‹å…°", "æƒ çµé¡¿", "æ–æµ", "è‹ç“¦", "è¥¿è—", "è¿ªå£«å°¼"
            ];
            
            for (const dest of destinations) {
                if (userMessage.includes(dest)) {
                    fields.destination = dest;
                    break;
                }
            }

            // æå–é¢„ç®—
            const budgetPatterns = [
                /(?:é¢„ç®—|èŠ±è´¹|è´¹ç”¨|ä»·æ ¼|ä»·é’±|æˆæœ¬)(?:æ˜¯|ä¸º|çº¦|å¤§æ¦‚|å·¦å³)?(?:\\s*)([0-9]+(?:\\.[0-9]+)?)(?:ä¸‡|åƒ|å…ƒ|å—)?/,
                /([0-9]+(?:\\.[0-9]+)?)(?:ä¸‡|åƒ|å…ƒ|å—)(?:çš„)?(?:é¢„ç®—|èŠ±è´¹|è´¹ç”¨)/,
                /(?:å‡†å¤‡|è®¡åˆ’|æ‰“ç®—)(?:èŠ±|ç”¨|èŠ±è´¹)([0-9]+(?:\\.[0-9]+)?)(?:ä¸‡|åƒ|å…ƒ|å—)/,
                /([0-9]+(?:\\.[0-9]+)?)(?:ä¸‡|åƒ|å…ƒ|å—)(?:ä»¥å†…|ä»¥ä¸‹|å·¦å³|ä¸Šä¸‹)/
            ];
            
            for (const pattern of budgetPatterns) {
                const match = userMessage.match(pattern);
                if (match) {
                    let amount = parseFloat(match[1]);
                    if (userMessage.includes('ä¸‡')) {
                        amount *= 10000;
                    } else if (userMessage.includes('åƒ')) {
                        amount *= 1000;
                    }
                    fields.budget = amount;
                    break;
                }
            }

            // æå–äººæ•°
            const groupPatterns = [
                /(?:å¸¦|å’Œ|ä¸|è·Ÿ)([0-9]+)(?:ä¸ª|å|ä½|äºº)(?:å­©å­|æœ‹å‹|å®¶äºº|åŒä¼´|ä¼™ä¼´)/,
                /([0-9]+)(?:ä¸ªäºº|äºº|å|ä½)(?:ä¸€èµ·|ä¸€åŒ|å…±åŒ)/,
                /(?:ä¸€å…±|æ€»å…±|åˆè®¡)([0-9]+)(?:ä¸ªäºº|äºº|å|ä½)/,
                /(?:æˆ‘ä»¬|å’±ä»¬)([0-9]+)(?:ä¸ªäºº|äºº|å|ä½)/,
                /(?:å®¶åº­|å›¢é˜Ÿ|å°ç»„)(?:æœ‰|æ˜¯)([0-9]+)(?:ä¸ªäºº|äºº|å|ä½)/,
                /([0-9]+)(?:äºº|ä¸ªäºº|å|ä½)(?:çš„)?(?:æ—…è¡Œ|æ—…æ¸¸|å‡ºè¡Œ)/
            ];
            
            for (const pattern of groupPatterns) {
                const match = userMessage.match(pattern);
                if (match) {
                    fields.groupSize = parseInt(match[1]);
                    break;
                }
            }
            
            // ç‰¹æ®Šå…³é”®è¯åŒ¹é…
            if (userMessage.includes('ä¸€ä¸ªäºº') || userMessage.includes('ç‹¬è‡ª') || userMessage.includes('å•ç‹¬')) {
                fields.groupSize = 1;
            }
            if (userMessage.includes('ä¸¤ä¸ªäºº') || userMessage.includes('æƒ…ä¾£') || userMessage.includes('å¤«å¦»')) {
                fields.groupSize = 2;
            }
            if (userMessage.includes('ä¸€å®¶äºº') || userMessage.includes('å…¨å®¶')) {
                fields.groupSize = 3;
            }

            // æå–æ—…è¡Œç±»å‹
            const message = userMessage.toLowerCase();
            if (message.includes('å•†åŠ¡') || message.includes('å‡ºå·®') || message.includes('ä¼šè®®')) {
                fields.travelType = 'å•†åŠ¡';
            } else if (message.includes('èœœæœˆ') || message.includes('æƒ…ä¾£') || message.includes('æµªæ¼«')) {
                fields.travelType = 'èœœæœˆ';
            } else if (message.includes('å®¶åº­') || message.includes('äº²å­') || message.includes('å¸¦å­©å­')) {
                fields.travelType = 'å®¶åº­';
            } else if (message.includes('æ¢é™©') || message.includes('æˆ·å¤–') || message.includes('å¾’æ­¥') || message.includes('ç™»å±±')) {
                fields.travelType = 'æ¢é™©';
            } else if (message.includes('ç¾é£Ÿ') || message.includes('åƒè´§') || message.includes('å“å°')) {
                fields.travelType = 'ç¾é£Ÿ';
            } else if (message.includes('æ–‡åŒ–') || message.includes('å†å²') || message.includes('å¤è¿¹') || message.includes('åšç‰©é¦†')) {
                fields.travelType = 'æ–‡åŒ–';
            } else if (message.includes('è´­ç‰©') || message.includes('è¡€æ‹¼') || message.includes('ä¹°ä¹°ä¹°')) {
                fields.travelType = 'è´­ç‰©';
            } else if (message.includes('ä¼‘é—²') || message.includes('åº¦å‡') || message.includes('æ”¾æ¾')) {
                fields.travelType = 'ä¼‘é—²';
            } else if (message.includes('æ‘„å½±') || message.includes('æ‹ç…§') || message.includes('æ‰“å¡')) {
                fields.travelType = 'æ‘„å½±';
            } else {
                fields.travelType = 'ä¼‘é—²';
            }

            return fields;
        }

        function runTests() {
            const resultsDiv = document.getElementById('testResults');
            let html = '';
            
            testCases.forEach((testCase, index) => {
                const fields = extractFields(testCase);
                const extractedCount = [fields.destination, fields.budget, fields.groupSize, fields.travelType].filter(f => f !== null).length;
                
                let resultClass = 'success';
                if (extractedCount === 0) {
                    resultClass = 'error';
                } else if (extractedCount < 3) {
                    resultClass = 'warning';
                }
                
                html += `
                    <div class="test-result">
                        <div class="test-input">æµ‹è¯•ç”¨ä¾‹ ${index + 1}: ${testCase}</div>
                        <div class="field-item ${fields.destination ? 'success' : 'error'}">
                            <span class="field-label">ç›®çš„åœ°:</span>
                            <span class="field-value">${fields.destination || 'æœªæå–åˆ°'}</span>
                        </div>
                        <div class="field-item ${fields.budget ? 'success' : 'error'}">
                            <span class="field-label">é¢„ç®—:</span>
                            <span class="field-value">${fields.budget ? fields.budget + 'å…ƒ' : 'æœªæå–åˆ°'}</span>
                        </div>
                        <div class="field-item ${fields.groupSize ? 'success' : 'error'}">
                            <span class="field-label">äººæ•°:</span>
                            <span class="field-value">${fields.groupSize ? fields.groupSize + 'äºº' : 'æœªæå–åˆ°'}</span>
                        </div>
                        <div class="field-item ${fields.travelType ? 'success' : 'error'}">
                            <span class="field-label">æ—…è¡Œç±»å‹:</span>
                            <span class="field-value">${fields.travelType || 'æœªæå–åˆ°'}</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 14px; color: #666;">
                            æå–æˆåŠŸç‡: ${extractedCount}/4 (${Math.round(extractedCount/4*100)}%)
                        </div>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæµ‹è¯•
        window.onload = runTests;
    </script>
</body>
</html>
