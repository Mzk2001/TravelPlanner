# 科大讯飞API配置指南

## 🎯 获取API密钥步骤

### 1. 注册科大讯飞开放平台账号
- 访问：https://www.xfyun.cn/
- 点击"立即注册"或"登录"
- 完成账号注册和实名认证

### 2. 创建应用
1. 登录后进入控制台
2. 点击"创建应用"
3. 填写应用信息：
   - 应用名称：TravelPlanner
   - 应用描述：旅游规划语音助手
   - 应用类型：Web应用

### 3. 开通语音听写服务
1. 在应用详情页面，找到"服务管理"
2. 搜索"语音听写"服务
3. 点击"开通服务"
4. 选择合适的套餐（建议选择免费试用套餐）

### 4. 获取API密钥
在应用详情页面，您会看到：
- **APPID**: 应用ID（如：12345678）
- **API Key**: API密钥（如：abcd1234efgh5678）
- **API Secret**: API密钥（如：ijkl9012mnop3456）

## 🔧 配置后端

### 方式1: 修改配置文件（推荐用于开发）
编辑 `backend/src/main/resources/application.yml`：

```yaml
xunfei:
  app-id: 您的实际APPID
  api-key: 您的实际API_KEY
  api-secret: 您的实际API_SECRET
```

### 方式2: 使用环境变量（推荐用于生产）
设置环境变量：
```bash
export XUNFEI_APP_ID=您的实际APPID
export XUNFEI_API_KEY=您的实际API_KEY
export XUNFEI_API_SECRET=您的实际API_SECRET
```

## 🧪 测试配置

### 1. 启动后端服务
```bash
cd backend
mvn spring-boot:run
```

### 2. 测试语音识别
- 访问前端应用
- 使用语音输入功能
- 检查控制台日志，确认API调用成功

### 3. 查看日志
如果配置正确，您会看到类似日志：
```
INFO  - 科大讯飞语音识别成功: 识别结果
```

如果配置错误，会看到：
```
ERROR - 科大讯飞API调用失败: 鉴权失败
```

## ❗ 注意事项

1. **免费额度**: 科大讯飞提供免费试用额度，超出后需要付费
2. **网络要求**: 确保服务器能访问科大讯飞API
3. **音频格式**: 支持wav、mp3等常见格式
4. **语言支持**: 主要支持中文语音识别

## 🔍 故障排除

### 常见错误及解决方案

1. **鉴权失败**
   - 检查APPID、API Key、API Secret是否正确
   - 确认应用已开通语音听写服务

2. **网络连接失败**
   - 检查服务器网络连接
   - 确认防火墙设置

3. **音频格式不支持**
   - 确认音频格式为支持的格式
   - 检查音频文件大小（通常限制在2MB以内）

## 📞 技术支持

如果遇到问题，可以：
1. 查看科大讯飞官方文档：https://www.xfyun.cn/doc/
2. 联系科大讯飞技术支持
3. 检查项目日志文件
